def {{ agent_label }}(state: State):
    """
    Agent Description: {{ agent_description }}
    """

    query = {{ agent_input }}
    result = {{ tool_name }}(query)

    if not result:
        return {
            "messages": [{"role": "assistant", "content": "I couldn't retrieve information from the API right now. Please try again later."}]
        }

    context = str(result)

    messages = [
        {
            "role": "system",
            "content": {{ system_prompt }}
        },
        {
            "role": "user",
            "content": {{ user_prompt }}
        }
    ]

    response = llm.invoke(messages)
    return {{ agent_output }}
